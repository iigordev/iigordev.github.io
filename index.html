<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>igor's industries</title>
<link rel="stylesheet" href="./assets/css/style.css" />
<style>
  body {
    margin: 0;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #1e1e1e;
  }
  .card-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    padding: 20px;
  }
  .card.nitro-card {
    width: 450px; 
    max-width: 100%;
  }
  .card-header .banner-img {
    width: 100%;
    height: 120px;
    background-size: cover;
    background-position: center;
    border-radius: 8px 8px 0 0;
  }
</style>
</head>
<body>

<div class="card-container">
  <div class="card nitro-card">
    <div class="card-header">
      <div class="banner-img" style="background: url('./assets/img/banner.png')"></div>
    </div>
    <div class="card-body">
      <div class="profile-header">
        <div class="profil-logo">
          <img src="./assets/img/logo_blue.png" />
        </div>
        <div class="badges-container">
          <div class="badge-item">
            <img src="./assets/img/badges/igortech-logo-verified.png" alt="" />
            <div class="tooltip tooltip-up">Igor's Industries Developer</div>
          </div>
          <div class="badge-item">
            <img src="./assets/img/badges/igortech-logo.png" alt="" />
            <div class="tooltip tooltip-up">Owner of Igor's Industries</div>
          </div>
          <div class="badge-item">
            <img src="./assets/img/badges/IG.png" alt="" />
            <div class="tooltip tooltip-up">@igorcasar2148</div>
          </div>
          <div class="badge-item">
            <img src="./assets/img/badges/youtube.png" alt="" />
            <div class="tooltip tooltip-up">@iiigordev</div>
          </div>
          <div class="badge-item">
            <img src="./assets/img/badges/roblox.png" alt="" />
            <div class="tooltip tooltip-up">@Profer199 [iigordev]</div>
          </div>
        </div>
      </div>

      <div class="profile-body">
        <div class="username">igordev</div>
        <hr />
        
        <div class="basic-infos">
          <div class="category-title">About Me</div>
          <p>
            Hey there! Don't know what this is? This is my site where you can see my socials, and to see what I'm currently doing!
            [Experimental Site, expect bugs!] {version 1.2} <br />
          </p>
        </div>

        <div class="basic-infos">
          <div class="category-title">No context of this:</div>
          <p>[5/Feb/2026], To be honest, i would LOVE to go back to July 2024! (If anyone from Slovensko is reading this, ill tell you nicely to GET OUT OF MY SITE)</p>
        </div>

        <div class="basic-infos" id="presence-container" style="display: none;">
          <div class="category-title">What I'm doing right now:</div>
          <div style="display: flex; align-items: center; gap: 12px; margin-top: 10px;">
            <div style="position: relative;">
              <img id="presence-icon" src="" style="width: 60px; height: 60px; border-radius: 8px; display: block; background: #111;" />
            </div>
            <div style="overflow: hidden;">
              <p id="presence-name" style="color: #fff; font-weight: bold; font-size: 0.9rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"></p>
              <p id="presence-details" style="color: #bdbebf; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"></p>
              <p id="presence-state" style="color: #bdbebf; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"></p>
              <p id="presence-timer" style="color: #bdbebf; font-size: 0.8rem; margin-top: 2px;"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const DISCORD_ID = '1073919144963084308';
  let activityStart = null;
  let timerInterval = null;

  async function updatePresence() {
    try {
      const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_ID}`);
      const data = await response.json();

      if (data.success && data.data.activities.length > 0) {
        const activity = data.data.activities.find(a => a.type !== 4) || data.data.activities[0];
        
        document.getElementById('presence-container').style.display = 'block';
        document.getElementById('presence-name').innerText = activity.name || "Doing something...";
        document.getElementById('presence-details').innerText = activity.details || "";
        document.getElementById('presence-state').innerText = activity.state || "";

        // Handle Timestamps
        if (activity.timestamps && activity.timestamps.start) {
          activityStart = activity.timestamps.start;
          if (!timerInterval) {
            timerInterval = setInterval(updateTimer, 1000);
          }
        } else {
          activityStart = null;
          document.getElementById('presence-timer').innerText = "";
        }

        // Handle Image Icon
        const icon = document.getElementById('presence-icon');
        if (activity.assets && activity.assets.large_image) {
          let imageUrl = "";
          const li = activity.assets.large_image;
          if (li.startsWith("spotify:")) {
            imageUrl = `https://i.scdn.co/image/${li.replace("spotify:", "")}`;
          } else if (li.startsWith("mp:external")) {
            imageUrl = `https://${li.split("/https/")[1]}`;
          } else if (activity.application_id) {
            imageUrl = `https://cdn.discordapp.com/app-assets/${activity.application_id}/${li}.png`;
          }
          if (imageUrl) icon.src = imageUrl;
        }
      } else {
        document.getElementById('presence-container').style.display = 'none';
        clearInterval(timerInterval);
        timerInterval = null;
      }
    } catch (err) { console.error("Lanyard Error:", err); }
  }

  function updateTimer() {
    if (!activityStart) return;
    const now = Date.now();
    const diff = Math.abs(now - activityStart);
    const hrs = Math.floor(diff / 3600000);
    const mins = Math.floor((diff % 3600000) / 60000);
    const secs = Math.floor((diff % 60000) / 1000);

    let timeStr = (hrs > 0 ? hrs + ":" : "") + 
                  (mins < 10 && hrs > 0 ? "0" : "") + mins + ":" + 
                  (secs < 10 ? "0" : "") + secs + " elapsed";
    
    document.getElementById('presence-timer').innerText = timeStr;
  }

  updatePresence();
  setInterval(updatePresence, 10000);
</script>
</body>
</html>
